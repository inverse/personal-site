{% if page.comments %}
<script>

  const giscusTheme = JSON.parse(localStorage.getItem("darkMode")) ? "dark" : "light";

  const giscusAttributes = {
    "src": "https://giscus.app/client.js",
    "data-repo": "inverse/personal-site",
    "data-repo-id": "MDEwOlJlcG9zaXRvcnk2NzM2MjIxNQ==",
    "data-category": "General",
    "data-category-id": "DIC_kwDOBAPdp84CldlL",
    "data-mapping": "pathname",
    "data-strict": "0",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-theme": giscusTheme,
    "data-lang": "en",
    "crossorigin": "anonymous",
    "async": "",
  };
  
  const giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.querySelector("main").appendChild(giscusScript);
</script>
{% endif %}
